// replay.c test a library against a keystroke stream
#include "../libk.h"

// replay.c returns retval identical readKey.c 
// after a keystroke stream 
// for testing purposes 

// prata page 515, nocalls has file scope, internal linkage
// nocalls is defined outside of all functions, with keyword static 
// nocalls is private its (current) translation unit
// by standard all static file scope variables initialize to zero so presumably
// the initialization of nocalls is not needed 

static int nocalls = 0;

int replay(void)
{

 int store[200]; int retval;

// local variable store contains command test sequence
 
 
 int j = 1; char c;
            store[j] = PAGE_DOWN;   j++;
            store[j] = PAGE_DOWN;   j++;
            store[j] = ARROW_DOWN;  j++;
            store[j] = END_KEY;     j++;
            store[j] = ARROW_RIGHT; j++;

            store[j] = CTRL_Q;      j++;

 nocalls ++;

// printf("nocalls = %d\n\r", nocalls);
// printf("j       = %d\n\r", j);
// printf("retval  = %d\n\r",store[nocalls]);
// int iw = 4234567; waiter(iw); // iw = 1234567;
 
 if (nocalls < j) retval = store[nocalls];
 else die("quitting after logic error in replay.c");

 return retval;

}
